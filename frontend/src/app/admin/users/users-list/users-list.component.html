<section class="users-list-page">
  <header class="users-header">
    <h2>Usuarios</h2>
    <a routerLink="/admin/users/new" class="btn-create">Novo usuario</a>
  </header>

  <p *ngIf="isLoading" class="state-message">Carregando usuarios...</p>
  <p *ngIf="errorMessage" class="state-message error">{{ errorMessage }}</p>

  <ul *ngIf="!isLoading && users.length > 0" class="users-list">
    <li *ngFor="let user of users; trackBy: trackByUserId" class="user-item">
      <div class="user-data">
        <strong>{{ user.name }}</strong>
        <span>{{ user.email }}</span>
      </div>

      <div class="actions">
        <button
          *ngIf="pendingDeleteId !== user.id"
          type="button"
          class="btn-delete"
          (click)="requestDelete(user.id)">
          Deletar
        </button>

        <div *ngIf="pendingDeleteId === user.id" class="confirm-area">
          <span>Tem certeza?</span>
          <button
            type="button"
            class="btn-confirm"
            [disabled]="deletingId === user.id"
            (click)="deleteUser(user.id)">
            Confirmar
          </button>
          <button
            type="button"
            class="btn-cancel"
            [disabled]="deletingId === user.id"
            (click)="cancelDelete()">
            Cancelar
          </button>
        </div>
      </div>
    </li>
  </ul>

  <p *ngIf="!isLoading && users.length === 0" class="state-message">
    Nenhum usuario encontrado.
  </p>
</section>
